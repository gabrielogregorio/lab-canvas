var t,i,e,s,n=/** @class */function(){function t(){var t=document.getElementById("canvas");this.contextCanvas=t.getContext("2d"),this.width=1600,this.height=800}return t.prototype.renderCity=function(){this.contextCanvas.beginPath(),this.contextCanvas.fillStyle="#22ffff",this.contextCanvas.fillRect(this.width-this.width/3.5,this.height-3,300,3),this.contextCanvas.closePath()},t.prototype.render=function(){this.renderCity()},t}(),a=/** @class */function(){function t(t,i){this.canvas=t,this.explosionFinished=!1,this.target=i,this.missionIsDone=!1,this.hasAlreadyTakenOffAboveMinimumHeight=!1,this.isGoing=!0,this.x=this.canvas.width-this.canvas.width/4+10*Math.random(),this.y=0,this.id=new Date().getTime()}return t.prototype.explode=function(){this.missionIsDone=!0,this.target.explode()},t.prototype.renderDefenseMissile=function(){this.canvas.contextCanvas.beginPath(),this.canvas.contextCanvas.fillStyle="#ddff33",this.canvas.contextCanvas.fillRect(this.x,this.canvas.height-this.y,5,5),this.canvas.contextCanvas.closePath()},t.prototype.renderExplosion=function(){this.canvas.contextCanvas.beginPath(),this.canvas.contextCanvas.fillStyle="#ffffff",this.canvas.contextCanvas.fillRect(this.x,this.canvas.height-this.y,10,10),this.canvas.contextCanvas.closePath()},t.prototype.trackArtefact=function(){if(this.target.isGoing){var t=this.target.x-this.x,i=this.target.y-this.y;t>200?this.x+=.375:t<200&&(this.x-=.375),t>0&&t<200?this.x+=1.5:t<0&&t>200&&(this.x-=1.5),i>0?this.y+=1.5:i<0&&(this.y-=1.5)}},t.prototype.render=function(){var t=this;if(!this.explosionFinished){if(this.missionIsDone){this.renderExplosion(),setTimeout(function(){t.explosionFinished=!0},2e3);return}this.isGoing&&(!this.hasAlreadyTakenOffAboveMinimumHeight&&this.y>30&&(this.hasAlreadyTakenOffAboveMinimumHeight=!0),this.trackArtefact(),this.renderDefenseMissile(),(Math.abs(this.target.x-this.x)+Math.abs(this.target.y-this.y)<=10||!this.target.isGoing||this.hasAlreadyTakenOffAboveMinimumHeight&&this.y<30)&&this.explode())}},t}(),o=/** @class */function(){function t(t,i){this.canvas=i,this.defenseMissilesByIdHostileArtifacts={},this.hostileArtifacts=t,this.hostileArtifactsDetected=[]}return t.prototype.render=function(){var t=this;this.hostileArtifacts.forEach(function(i){!t.hostileArtifactsDetected.includes(i.id)&&i.y>200&&(t.defenseMissilesByIdHostileArtifacts[i.id]=new a(t.canvas,i),t.hostileArtifactsDetected.push(i.id))}),this.hostileArtifactsDetected.forEach(function(i){var e,s;null===(s=null===(e=t.defenseMissilesByIdHostileArtifacts)||void 0===e?void 0:e[i])||void 0===s||s.render()})},t}(),h=function(t){var i=t+10*Math.random();return i>50?50:i<-50?-50:i},r=/** @class */function(){function t(t,i){var e=i.color,s=i.horizontalSpeedInitial,n=i.verticalSpeedInitial;this.canvas=t,this.color=e,this.horizontalSpeedInitial=s,this.verticalSpeedInitial=n,this.elapsedTime=0,this.isGoing=!0,this.finishExplosion=!1,this.x=0,this.y=0,this.id=new Date().getTime()}return t.prototype.explode=function(){var t=this;this.isGoing=!1,setTimeout(function(){t.finishExplosion=!0},2e3)},t.prototype.renderPosition=function(){this.elapsedTime+=.01,this.canvas.contextCanvas.beginPath(),this.canvas.contextCanvas.fillStyle=this.color,this.canvas.contextCanvas.fillRect(this.x,this.canvas.height-this.y,4,4),this.canvas.contextCanvas.closePath()},t.prototype.renderExplosion=function(){this.canvas.contextCanvas.beginPath(),this.canvas.contextCanvas.fillStyle="#ff7722",this.canvas.contextCanvas.fillRect(this.x,this.canvas.height-this.y,10,10),this.canvas.contextCanvas.closePath()},t.prototype.render=function(t){if(!this.finishExplosion){var i,e=(i=10*this.elapsedTime,{x:Math.floor((this.horizontalSpeedInitial+t)*i/20),y:Math.floor((this.verticalSpeedInitial*i-4.905*i*i)/20)});if(this.y=e.y,this.x=e.x,this.isGoing&&this.elapsedTime>2&&e.y<=5&&this.explode(),this.isGoing){this.renderPosition();return}0===this.elapsedTime||this.finishExplosion||this.renderExplosion()}},t}(),c=0;t=new n,i=new function(){var t=this;this.keyboardState={space:!1};var i={Space:function(i){t.keyboardState.space=i}};window.addEventListener("keydown",function(t){var e;null===(e=i[t.code])||void 0===e||e.call(i,!0)}),window.addEventListener("keyup",function(t){var e;null===(e=i[t.code])||void 0===e||e.call(i,!1)})},e=[],s=new o(e,t),requestAnimationFrame(function n(){t.contextCanvas.clearRect(0,0,t.width,t.height),t.render(),s.render(),c=h(c),i.keyboardState.space&&e.push(new r(t,{color:"rgb(".concat(Math.floor(256*Math.random()),", ").concat(Math.floor(256*Math.random()),", ").concat(Math.floor(256*Math.random()),")"),horizontalSpeedInitial:200+(Math.random()-.5)*100+(Math.random()>.9?80*Math.random():0),verticalSpeedInitial:500+(Math.random()-.5)*100+(Math.random()>.9?80*Math.random():0)})),e.forEach(function(t){t.render(c)}),requestAnimationFrame(n)});//# sourceMappingURL=dome.5a4b4eaa.js.map

//# sourceMappingURL=dome.5a4b4eaa.js.map
