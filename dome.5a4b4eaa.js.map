{"mappings":"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","sources":["<anon>","src/dome/index.ts","src/dome/Canvas.ts","src/dome/RadarSystem.ts","src/dome/DefenseMissiles.ts","src/dome/KeyBoardHandler.ts","src/dome/utils.ts","src/dome/buildHostileArtifact.ts","src/dome/HostileArtifact.ts"],"sourcesContent":["var $fa4cdc5e54ed440d$export$8d01c972ee8b14a9 = /** @class */ function() {\n    function Canvas() {\n        var canvas = document.getElementById(\"canvas\");\n        this.contextCanvas = canvas.getContext(\"2d\");\n        this.width = 1600;\n        this.height = 800;\n    }\n    Canvas.prototype.renderCity = function() {\n        this.contextCanvas.beginPath();\n        this.contextCanvas.fillStyle = \"#22ffff\";\n        this.contextCanvas.fillRect(this.width - this.width / 3.5, this.height - 3, 300, 3);\n        this.contextCanvas.closePath();\n    };\n    Canvas.prototype.render = function() {\n        this.renderCity();\n    };\n    return Canvas;\n}();\n\n\nvar $3d149cbc210b66cc$var$defaultSpeed = 1.5;\nvar $3d149cbc210b66cc$var$minHeightToFlight = 30;\nvar $3d149cbc210b66cc$var$TIME_IN_MS_TO_FINISH_ANIMATE_EXPLOSION = 2000;\nvar $3d149cbc210b66cc$export$2868ee9a20f77d25 = /** @class */ function() {\n    function DefenseMissiles(canvas, HostileArtifacts) {\n        this.canvas = canvas;\n        this.explosionFinished = false;\n        this.target = HostileArtifacts;\n        this.missionIsDone = false;\n        this.hasAlreadyTakenOffAboveMinimumHeight = false;\n        this.isGoing = true;\n        this.x = this.canvas.width - this.canvas.width / 4 + Math.random() * 10;\n        this.y = 0;\n        this.id = new Date().getTime();\n    }\n    DefenseMissiles.prototype.explode = function() {\n        this.missionIsDone = true;\n        this.target.explode();\n    };\n    DefenseMissiles.prototype.renderDefenseMissile = function() {\n        this.canvas.contextCanvas.beginPath();\n        this.canvas.contextCanvas.fillStyle = \"#ddff33\";\n        this.canvas.contextCanvas.fillRect(this.x, this.canvas.height - this.y, 5, 5);\n        this.canvas.contextCanvas.closePath();\n    };\n    DefenseMissiles.prototype.renderExplosion = function() {\n        this.canvas.contextCanvas.beginPath();\n        this.canvas.contextCanvas.fillStyle = \"#ffffff\";\n        this.canvas.contextCanvas.fillRect(this.x, this.canvas.height - this.y, 10, 10);\n        this.canvas.contextCanvas.closePath();\n    };\n    DefenseMissiles.prototype.trackArtefact = function() {\n        if (!this.target.isGoing) return;\n        var deltaX = this.target.x - this.x;\n        var deltaY = this.target.y - this.y;\n        var distanceToOnlyUp = 200;\n        if (deltaX > distanceToOnlyUp) this.x += $3d149cbc210b66cc$var$defaultSpeed / 4;\n        else if (deltaX < distanceToOnlyUp) this.x -= $3d149cbc210b66cc$var$defaultSpeed / 4;\n        if (deltaX > 0 && deltaX < distanceToOnlyUp) this.x += $3d149cbc210b66cc$var$defaultSpeed;\n        else if (deltaX < 0 && deltaX > distanceToOnlyUp) this.x -= $3d149cbc210b66cc$var$defaultSpeed;\n        if (deltaY > 0) this.y += $3d149cbc210b66cc$var$defaultSpeed;\n        else if (deltaY < 0) this.y -= $3d149cbc210b66cc$var$defaultSpeed;\n    };\n    DefenseMissiles.prototype.render = function() {\n        var _this = this;\n        if (this.explosionFinished) return;\n        if (this.missionIsDone) {\n            this.renderExplosion();\n            setTimeout(function() {\n                _this.explosionFinished = true;\n            }, $3d149cbc210b66cc$var$TIME_IN_MS_TO_FINISH_ANIMATE_EXPLOSION);\n            return;\n        }\n        if (!this.isGoing) return;\n        if (!this.hasAlreadyTakenOffAboveMinimumHeight && this.y > $3d149cbc210b66cc$var$minHeightToFlight) this.hasAlreadyTakenOffAboveMinimumHeight = true;\n        this.trackArtefact();\n        this.renderDefenseMissile();\n        var targetX = Math.abs(this.target.x - this.x);\n        var targetY = Math.abs(this.target.y - this.y);\n        var itIsCloseToTheArtifact = targetX + targetY <= 10;\n        if (itIsCloseToTheArtifact || !this.target.isGoing || this.hasAlreadyTakenOffAboveMinimumHeight && this.y < $3d149cbc210b66cc$var$minHeightToFlight) this.explode();\n    };\n    return DefenseMissiles;\n}();\n\n\nvar $ec0bf2b6bf4eb40a$var$MIN_HEIGHT_IN_PX_TO_DETECT_HOSTILE_ARTIFACTS = 200;\nvar $ec0bf2b6bf4eb40a$export$d5e35cb93627922 = /** @class */ function() {\n    function RadarSystem(hostileArtifacts, canvas) {\n        this.canvas = canvas;\n        this.defenseMissilesByIdHostileArtifacts = {};\n        this.hostileArtifacts = hostileArtifacts;\n        this.hostileArtifactsDetected = [];\n    }\n    RadarSystem.prototype.render = function() {\n        var _this = this;\n        this.hostileArtifacts.forEach(function(hostileArtifact) {\n            var artifactAreDetected = _this.hostileArtifactsDetected.includes(hostileArtifact.id);\n            if (!artifactAreDetected && hostileArtifact.y > $ec0bf2b6bf4eb40a$var$MIN_HEIGHT_IN_PX_TO_DETECT_HOSTILE_ARTIFACTS) {\n                _this.defenseMissilesByIdHostileArtifacts[hostileArtifact.id] = new (0, $3d149cbc210b66cc$export$2868ee9a20f77d25)(_this.canvas, hostileArtifact);\n                _this.hostileArtifactsDetected.push(hostileArtifact.id);\n            }\n        });\n        this.hostileArtifactsDetected.forEach(function(hostileArtifactsId) {\n            var _a, _b;\n            (_b = (_a = _this.defenseMissilesByIdHostileArtifacts) === null || _a === void 0 ? void 0 : _a[hostileArtifactsId]) === null || _b === void 0 || _b.render();\n        });\n    };\n    return RadarSystem;\n}();\n\n\nvar $2338a30c68c1a1d8$export$6a77e7ef76b918fb = /** @class */ function() {\n    function KeyBoardHandler() {\n        var _this = this;\n        this.keyboardState = {\n            space: false\n        };\n        var moves = {\n            Space: function(newValue) {\n                _this.keyboardState.space = newValue;\n            }\n        };\n        window.addEventListener(\"keydown\", function(event) {\n            var _a;\n            (_a = moves[event.code]) === null || _a === void 0 || _a.call(moves, true);\n        });\n        window.addEventListener(\"keyup\", function(event) {\n            var _a;\n            (_a = moves[event.code]) === null || _a === void 0 || _a.call(moves, false);\n        });\n    }\n    return KeyBoardHandler;\n}();\n\n\nfunction $a0043beef1da4b17$export$a187cfa0983d4faf() {\n    var r = Math.floor(Math.random() * 256);\n    var g = Math.floor(Math.random() * 256);\n    var b = Math.floor(Math.random() * 256);\n    return \"rgb(\".concat(r, \", \").concat(g, \", \").concat(b, \")\");\n}\nvar $a0043beef1da4b17$export$4db111e237e13b39 = function(windSpeed) {\n    var newWindSpeed = windSpeed + Math.random() * 10;\n    if (newWindSpeed > 50) return 50;\n    if (newWindSpeed < -50) return -50;\n    return newWindSpeed;\n};\nvar $a0043beef1da4b17$var$GRAVITY = 9.81;\nvar $a0043beef1da4b17$var$FACTOR_TO_SHOW_INSIDE_CANVAS = 20;\nvar $a0043beef1da4b17$export$20ce9a84b2a4cf2a = function(elapsedTime, horizontalSpeedInitial, verticalSpeedInitial, windSpeed) {\n    var horizontalSpeedCorrected = horizontalSpeedInitial + windSpeed;\n    var x = horizontalSpeedCorrected * elapsedTime;\n    var y = verticalSpeedInitial * elapsedTime - 0.5 * $a0043beef1da4b17$var$GRAVITY * elapsedTime * elapsedTime;\n    return {\n        x: Math.floor(x / $a0043beef1da4b17$var$FACTOR_TO_SHOW_INSIDE_CANVAS),\n        y: Math.floor(y / $a0043beef1da4b17$var$FACTOR_TO_SHOW_INSIDE_CANVAS)\n    };\n};\n\n\n\nvar $614c1c60df8d33ac$var$TIME_IN_MS_TO_FINISH_ANIMATE_EXPLOSION = 2000;\nvar $614c1c60df8d33ac$var$FACTOR_TO_UPPER_MOVEMENT_TIME = 10;\nvar $614c1c60df8d33ac$export$e2278f6542619227 = /** @class */ function() {\n    function HostileArtifact(canvas, _a) {\n        var color = _a.color, horizontalSpeedInitial = _a.horizontalSpeedInitial, verticalSpeedInitial = _a.verticalSpeedInitial;\n        this.canvas = canvas;\n        this.color = color;\n        this.horizontalSpeedInitial = horizontalSpeedInitial;\n        this.verticalSpeedInitial = verticalSpeedInitial;\n        this.elapsedTime = 0;\n        this.isGoing = true;\n        this.finishExplosion = false;\n        this.x = 0;\n        this.y = 0;\n        this.id = new Date().getTime();\n    }\n    HostileArtifact.prototype.explode = function() {\n        var _this = this;\n        this.isGoing = false;\n        setTimeout(function() {\n            _this.finishExplosion = true;\n        }, $614c1c60df8d33ac$var$TIME_IN_MS_TO_FINISH_ANIMATE_EXPLOSION);\n    };\n    HostileArtifact.prototype.renderPosition = function() {\n        this.elapsedTime += 0.01;\n        this.canvas.contextCanvas.beginPath();\n        this.canvas.contextCanvas.fillStyle = this.color;\n        this.canvas.contextCanvas.fillRect(this.x, this.canvas.height - this.y, 4, 4);\n        this.canvas.contextCanvas.closePath();\n    };\n    HostileArtifact.prototype.renderExplosion = function() {\n        this.canvas.contextCanvas.beginPath();\n        this.canvas.contextCanvas.fillStyle = \"#ff7722\";\n        this.canvas.contextCanvas.fillRect(this.x, this.canvas.height - this.y, 10, 10);\n        this.canvas.contextCanvas.closePath();\n    };\n    HostileArtifact.prototype.render = function(windSpeed) {\n        if (this.finishExplosion) return;\n        var position = (0, $a0043beef1da4b17$export$20ce9a84b2a4cf2a)(this.elapsedTime * $614c1c60df8d33ac$var$FACTOR_TO_UPPER_MOVEMENT_TIME, this.horizontalSpeedInitial, this.verticalSpeedInitial, windSpeed);\n        this.y = position.y;\n        this.x = position.x;\n        var timeToConsiderAreStarted = 2;\n        var minHeightToExplode = 5;\n        if (this.isGoing && this.elapsedTime > timeToConsiderAreStarted && position.y <= minHeightToExplode) this.explode();\n        if (this.isGoing) {\n            this.renderPosition();\n            return;\n        }\n        var HostileArtifactsAsLaunched = this.elapsedTime !== 0;\n        if (HostileArtifactsAsLaunched && !this.finishExplosion) this.renderExplosion();\n    };\n    return HostileArtifact;\n}();\n\n\n\nvar $b41dc82d3805874d$export$9680a05d49391975 = function(canvas) {\n    var hostileArtifact = new (0, $614c1c60df8d33ac$export$e2278f6542619227)(canvas, {\n        color: (0, $a0043beef1da4b17$export$a187cfa0983d4faf)(),\n        horizontalSpeedInitial: 200 + (Math.random() - 0.5) * 100 + (Math.random() > 0.9 ? Math.random() * 80 : 0),\n        verticalSpeedInitial: 500 + (Math.random() - 0.5) * 100 + (Math.random() > 0.9 ? Math.random() * 80 : 0)\n    });\n    return hostileArtifact;\n};\n\n\nvar $a77ecfb76e8b8641$var$windSpeed = 0;\n(function() {\n    var canvas = new (0, $fa4cdc5e54ed440d$export$8d01c972ee8b14a9)();\n    var keyboard = new (0, $2338a30c68c1a1d8$export$6a77e7ef76b918fb)();\n    var hostileArtifacts = [];\n    var radarSystem = new (0, $ec0bf2b6bf4eb40a$export$d5e35cb93627922)(hostileArtifacts, canvas);\n    function bootstrap() {\n        canvas.contextCanvas.clearRect(0, 0, canvas.width, canvas.height);\n        canvas.render();\n        radarSystem.render();\n        $a77ecfb76e8b8641$var$windSpeed = (0, $a0043beef1da4b17$export$4db111e237e13b39)($a77ecfb76e8b8641$var$windSpeed);\n        if (keyboard.keyboardState.space) hostileArtifacts.push((0, $b41dc82d3805874d$export$9680a05d49391975)(canvas));\n        hostileArtifacts.forEach(function(hostileArtifact) {\n            hostileArtifact.render($a77ecfb76e8b8641$var$windSpeed);\n        });\n        requestAnimationFrame(bootstrap);\n    }\n    requestAnimationFrame(bootstrap);\n})();\n\n\n//# sourceMappingURL=dome.5a4b4eaa.js.map\n","import { Canvas } from \"./Canvas\";\nimport { RadarSystem } from \"./RadarSystem\";\nimport { KeyBoardHandler } from \"./KeyBoardHandler\";\nimport { HostileArtifact } from \"./HostileArtifact\";\nimport { randomizeWindSpeed } from \"./utils\";\nimport { buildHostileArtifact } from \"./buildHostileArtifact\";\n\nlet windSpeed = 0;\n\n(function () {\n  const canvas = new Canvas();\n  const keyboard = new KeyBoardHandler();\n\n  const hostileArtifacts: HostileArtifact[] = [];\n  const radarSystem = new RadarSystem(hostileArtifacts, canvas);\n\n  function bootstrap() {\n    canvas.contextCanvas.clearRect(0, 0, canvas.width, canvas.height);\n\n    canvas.render();\n    radarSystem.render();\n\n    windSpeed = randomizeWindSpeed(windSpeed);\n\n    if (keyboard.keyboardState.space) {\n      hostileArtifacts.push(buildHostileArtifact(canvas));\n    }\n\n    hostileArtifacts.forEach((hostileArtifact) => {\n      hostileArtifact.render(windSpeed);\n    });\n\n    requestAnimationFrame(bootstrap);\n  }\n\n  requestAnimationFrame(bootstrap);\n})();\n","export class Canvas {\n  contextCanvas: CanvasRenderingContext2D;\n  width: number;\n  height: number;\n\n  constructor() {\n    const canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n\n    this.contextCanvas = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n    this.width = 1600;\n    this.height = 800;\n  }\n\n  renderCity() {\n    this.contextCanvas.beginPath();\n    this.contextCanvas.fillStyle = \"#22ffff\";\n    this.contextCanvas.fillRect(this.width - this.width / 3.5, this.height - 3, 300, 3);\n    this.contextCanvas.closePath();\n  }\n\n  render() {\n    this.renderCity();\n  }\n}\n","import { Canvas } from \"./Canvas\";\nimport { DefenseMissiles } from \"./DefenseMissiles\";\nimport { HostileArtifact } from \"./HostileArtifact\";\n\nconst MIN_HEIGHT_IN_PX_TO_DETECT_HOSTILE_ARTIFACTS = 200;\n\nexport class RadarSystem {\n  canvas: Canvas;\n\n  hostileArtifacts: HostileArtifact[];\n  hostileArtifactsDetected: number[];\n  defenseMissilesByIdHostileArtifacts: { [key: string]: DefenseMissiles };\n\n  constructor(hostileArtifacts: HostileArtifact[], canvas: Canvas) {\n    this.canvas = canvas;\n    this.defenseMissilesByIdHostileArtifacts = {};\n    this.hostileArtifacts = hostileArtifacts;\n    this.hostileArtifactsDetected = [];\n  }\n\n  render() {\n    this.hostileArtifacts.forEach((hostileArtifact) => {\n      const artifactAreDetected = this.hostileArtifactsDetected.includes(hostileArtifact.id);\n\n      if (!artifactAreDetected && hostileArtifact.y > MIN_HEIGHT_IN_PX_TO_DETECT_HOSTILE_ARTIFACTS) {\n        this.defenseMissilesByIdHostileArtifacts[hostileArtifact.id] = new DefenseMissiles(this.canvas, hostileArtifact);\n\n        this.hostileArtifactsDetected.push(hostileArtifact.id);\n      }\n    });\n\n    this.hostileArtifactsDetected.forEach((hostileArtifactsId) => {\n      this.defenseMissilesByIdHostileArtifacts?.[hostileArtifactsId]?.render();\n    });\n  }\n}\n","import { Canvas } from \"./Canvas\";\nimport { HostileArtifact } from \"./HostileArtifact\";\n\nconst defaultSpeed = 1.5;\nconst minHeightToFlight = 30;\nconst TIME_IN_MS_TO_FINISH_ANIMATE_EXPLOSION = 2000;\n\nexport class DefenseMissiles {\n  missionIsDone: boolean;\n  isGoing: boolean;\n  canvas: Canvas;\n  target: HostileArtifact;\n  explosionFinished: boolean;\n  hasAlreadyTakenOffAboveMinimumHeight: boolean;\n\n  x: number;\n  y: number;\n  id: number;\n  constructor(canvas: Canvas, HostileArtifacts: HostileArtifact) {\n    this.canvas = canvas;\n    this.explosionFinished = false;\n    this.target = HostileArtifacts;\n    this.missionIsDone = false;\n    this.hasAlreadyTakenOffAboveMinimumHeight = false;\n    this.isGoing = true;\n\n    this.x = this.canvas.width - this.canvas.width / 4 + Math.random() * 10;\n    this.y = 0;\n    this.id = new Date().getTime();\n  }\n\n  explode() {\n    this.missionIsDone = true;\n    this.target.explode();\n  }\n\n  renderDefenseMissile() {\n    this.canvas.contextCanvas.beginPath();\n    this.canvas.contextCanvas.fillStyle = \"#ddff33\";\n    this.canvas.contextCanvas.fillRect(this.x, this.canvas.height - this.y, 5, 5);\n    this.canvas.contextCanvas.closePath();\n  }\n\n  renderExplosion() {\n    this.canvas.contextCanvas.beginPath();\n    this.canvas.contextCanvas.fillStyle = \"#ffffff\";\n    this.canvas.contextCanvas.fillRect(this.x, this.canvas.height - this.y, 10, 10);\n    this.canvas.contextCanvas.closePath();\n  }\n\n  trackArtefact() {\n    if (!this.target.isGoing) {\n      return;\n    }\n\n    const deltaX = this.target.x - this.x;\n    const deltaY = this.target.y - this.y;\n\n    const distanceToOnlyUp = 200;\n    if (deltaX > distanceToOnlyUp) {\n      this.x += defaultSpeed / 4;\n    } else if (deltaX < distanceToOnlyUp) {\n      this.x -= defaultSpeed / 4;\n    }\n\n    if (deltaX > 0 && deltaX < distanceToOnlyUp) {\n      this.x += defaultSpeed;\n    } else if (deltaX < 0 && deltaX > distanceToOnlyUp) {\n      this.x -= defaultSpeed;\n    }\n\n    if (deltaY > 0) {\n      this.y += defaultSpeed;\n    } else if (deltaY < 0) {\n      this.y -= defaultSpeed;\n    }\n  }\n\n  render() {\n    if (this.explosionFinished) {\n      return;\n    }\n\n    if (this.missionIsDone) {\n      this.renderExplosion();\n\n      setTimeout(() => {\n        this.explosionFinished = true;\n      }, TIME_IN_MS_TO_FINISH_ANIMATE_EXPLOSION);\n      return;\n    }\n\n    if (!this.isGoing) {\n      return;\n    }\n\n    if (!this.hasAlreadyTakenOffAboveMinimumHeight && this.y > minHeightToFlight) {\n      this.hasAlreadyTakenOffAboveMinimumHeight = true;\n    }\n\n    this.trackArtefact();\n    this.renderDefenseMissile();\n\n    const targetX = Math.abs(this.target.x - this.x);\n    const targetY = Math.abs(this.target.y - this.y);\n    const itIsCloseToTheArtifact = targetX + targetY <= 10;\n    if (itIsCloseToTheArtifact || !this.target.isGoing || (this.hasAlreadyTakenOffAboveMinimumHeight && this.y < minHeightToFlight)) {\n      this.explode();\n    }\n  }\n}\n","import { keyboardStateType } from \"./types\";\n\nexport class KeyBoardHandler {\n  keyboardState: keyboardStateType;\n\n  constructor() {\n    this.keyboardState = {\n      space: false,\n    };\n\n    const moves = {\n      Space: (newValue) => {\n        this.keyboardState.space = newValue;\n      },\n    };\n\n    window.addEventListener(\"keydown\", (event) => {\n      moves[event.code]?.(true);\n    });\n\n    window.addEventListener(\"keyup\", (event) => {\n      moves[event.code]?.(false);\n    });\n  }\n}\n","export function generateRgbCss() {\n  const r = Math.floor(Math.random() * 256);\n  const g = Math.floor(Math.random() * 256);\n  const b = Math.floor(Math.random() * 256);\n\n  return `rgb(${r}, ${g}, ${b})`;\n}\n\nexport const randomizeWindSpeed = (windSpeed: number): number => {\n  let newWindSpeed = windSpeed + Math.random() * 10;\n\n  if (newWindSpeed > 50) {\n    return 50;\n  }\n\n  if (newWindSpeed < -50) {\n    return -50;\n  }\n\n  return newWindSpeed;\n};\n\n\nconst GRAVITY = 9.81;\nconst FACTOR_TO_SHOW_INSIDE_CANVAS = 20;\n\nexport const calculateEllipseHostileArtifact = (elapsedTime: number, horizontalSpeedInitial: number, verticalSpeedInitial: number, windSpeed: number)  => {\n  let horizontalSpeedCorrected = horizontalSpeedInitial + windSpeed;\n\n  let x = horizontalSpeedCorrected * elapsedTime;\n  let y = verticalSpeedInitial * elapsedTime - 0.5 * GRAVITY * elapsedTime * elapsedTime;\n\n  return {\n    x: Math.floor(x / FACTOR_TO_SHOW_INSIDE_CANVAS),\n    y: Math.floor(y / FACTOR_TO_SHOW_INSIDE_CANVAS),\n  };\n}\n","import { Canvas } from \"./Canvas\";\nimport { HostileArtifact } from \"./HostileArtifact\";\nimport { generateRgbCss } from \"./utils\";\n\nexport const buildHostileArtifact = (canvas: Canvas): HostileArtifact => {\n  const hostileArtifact = new HostileArtifact(canvas, {\n    color: generateRgbCss(),\n    horizontalSpeedInitial: 200 + (Math.random() - 0.5) * 100 + (Math.random() > 0.9 ? Math.random() * 80 : 0),\n    verticalSpeedInitial: 500 + (Math.random() - 0.5) * 100 + (Math.random() > 0.9 ? Math.random() * 80 : 0),\n  });\n\n  return hostileArtifact;\n};\n","import { Canvas } from \"./Canvas\";\nimport { calculateEllipseHostileArtifact } from \"./utils\";\n\nconst TIME_IN_MS_TO_FINISH_ANIMATE_EXPLOSION = 2000;\nconst FACTOR_TO_UPPER_MOVEMENT_TIME = 10;\n\nexport class HostileArtifact {\n  horizontalSpeedInitial: number;\n  verticalSpeedInitial: number;\n  canvas: Canvas;\n  color: string;\n  elapsedTime: number;\n  isGoing: boolean;\n  finishExplosion: boolean;\n\n  x: number;\n  y: number;\n  id: number;\n\n  constructor(canvas, { color, horizontalSpeedInitial, verticalSpeedInitial }: { color: string; horizontalSpeedInitial: number; verticalSpeedInitial: number }) {\n    this.canvas = canvas;\n    this.color = color;\n    this.horizontalSpeedInitial = horizontalSpeedInitial;\n    this.verticalSpeedInitial = verticalSpeedInitial;\n    this.elapsedTime = 0;\n    this.isGoing = true;\n    this.finishExplosion = false;\n\n    this.x = 0;\n    this.y = 0;\n    this.id = new Date().getTime();\n  }\n\n  explode() {\n    this.isGoing = false;\n\n    setTimeout(() => {\n      this.finishExplosion = true;\n    }, TIME_IN_MS_TO_FINISH_ANIMATE_EXPLOSION);\n  }\n\n  renderPosition() {\n    this.elapsedTime += 0.01;\n\n    this.canvas.contextCanvas.beginPath();\n    this.canvas.contextCanvas.fillStyle = this.color;\n    this.canvas.contextCanvas.fillRect(this.x, this.canvas.height - this.y, 4, 4);\n    this.canvas.contextCanvas.closePath();\n  }\n\n  renderExplosion() {\n    this.canvas.contextCanvas.beginPath();\n    this.canvas.contextCanvas.fillStyle = \"#ff7722\";\n    this.canvas.contextCanvas.fillRect(this.x, this.canvas.height - this.y, 10, 10);\n    this.canvas.contextCanvas.closePath();\n  }\n\n  render(windSpeed) {\n    if (this.finishExplosion) {\n      return;\n    }\n\n    const position = calculateEllipseHostileArtifact(this.elapsedTime * FACTOR_TO_UPPER_MOVEMENT_TIME, this.horizontalSpeedInitial, this.verticalSpeedInitial, windSpeed);\n\n    this.y = position.y;\n    this.x = position.x;\n\n    const timeToConsiderAreStarted = 2;\n    const minHeightToExplode = 5;\n    if (this.isGoing && this.elapsedTime > timeToConsiderAreStarted && position.y <= minHeightToExplode) {\n      this.explode();\n    }\n\n    if (this.isGoing) {\n      this.renderPosition();\n      return;\n    }\n\n    const HostileArtifactsAsLaunched = this.elapsedTime !== 0;\n    if (HostileArtifactsAsLaunched && !this.finishExplosion) {\n      this.renderExplosion();\n    }\n  }\n}\n"],"names":["canvas","keyboard","hostileArtifacts","radarSystem","$fa4cdc5e54ed440d$export$8d01c972ee8b14a9","Canvas","document","getElementById","contextCanvas","getContext","width","height","prototype","renderCity","beginPath","fillStyle","fillRect","closePath","render","$3d149cbc210b66cc$export$2868ee9a20f77d25","DefenseMissiles","HostileArtifacts","explosionFinished","target","missionIsDone","hasAlreadyTakenOffAboveMinimumHeight","isGoing","x","Math","random","y","id","Date","getTime","explode","renderDefenseMissile","renderExplosion","trackArtefact","deltaX","deltaY","$3d149cbc210b66cc$var$defaultSpeed","_this","setTimeout","itIsCloseToTheArtifact","abs","$ec0bf2b6bf4eb40a$export$d5e35cb93627922","RadarSystem","defenseMissilesByIdHostileArtifacts","hostileArtifactsDetected","forEach","hostileArtifact","includes","push","hostileArtifactsId","_a","_b","$a0043beef1da4b17$export$4db111e237e13b39","windSpeed","newWindSpeed","$614c1c60df8d33ac$export$e2278f6542619227","HostileArtifact","color","horizontalSpeedInitial","verticalSpeedInitial","elapsedTime","finishExplosion","renderPosition","position","floor","$a77ecfb76e8b8641$var$windSpeed","keyboardState","space","moves","Space","newValue","window","addEventListener","event","code","call","requestAnimationFrame","bootstrap","clearRect","concat"],"version":3,"file":"dome.5a4b4eaa.js.map"}