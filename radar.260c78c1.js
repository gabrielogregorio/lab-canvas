var t,e,i,s,n,h=/** @class */function(){function t(t,e){this.keyboard=e,this.canvas=t,this.x=300,this.y=200,this.width=5,this.height=5,this.xVelocity=0,this.yVelocity=0}return t.prototype.render=function(){this.keyboard.keyboardState.top&&(this.yVelocity-=.2),this.keyboard.keyboardState.bottom&&(this.yVelocity+=.2),this.keyboard.keyboardState.left&&(this.xVelocity-=.2),this.keyboard.keyboardState.right&&(this.xVelocity+=.2),this.x+=this.xVelocity,this.y+=this.yVelocity,this.keyboard.keyboardState.KeyQ&&(this.width-=5,this.height-=5),this.keyboard.keyboardState.KeyE&&(this.width+=5,this.height+=5),this.canvas.ctx.beginPath(),this.canvas.ctx.fillStyle="#ffde3c",this.canvas.ctx.font="16px Arial",this.canvas.ctx.textAlign="center",this.canvas.ctx.fillText("X=".concat(Math.floor(this.x)," Y=").concat(Math.floor(this.y)," VX=").concat(Number(this.xVelocity.toFixed(1))," VY=").concat(Number(this.yVelocity.toFixed(1))),this.x,this.y-10),this.canvas.ctx.fillStyle="#ff2222",this.canvas.ctx.fillRect(this.x,this.y,this.width,this.height),this.canvas.ctx.closePath()},t}(),c=/** @class */function(){function t(){}return t.prototype.render=function(t){var e=performance.now(),i=function(s){s-e>=16.666666666666668&&(t(),e=s),requestAnimationFrame(i)};requestAnimationFrame(i)},t}(),a={};Object.defineProperty(a,"Radar",{get:()=>f,set:void 0,enumerable:!0,configurable:!0});var r=/** @class */function(){function t(t,e,i,s,n,h){this.canvas=t,this.isInInitialDirection=!0,this.publicFrequency=h,this.isActive=!0,this.x=s,this.y=n,this.velocityX=Math.cos(e)*i,this.velocityY=Math.sin(e)*i,this.maxLifeInRender=500,this.lifeRender=0,this.sizeWidth=2,this.sizeHeight=2}return t.prototype.deactivate=function(){this.isActive=!1},t.prototype.returnDirection=function(){this.velocityX=-1*this.velocityX,this.velocityY=-1*this.velocityY,this.isInInitialDirection=!1},t.prototype.render=function(){this.isActive&&(this.x+=this.velocityX,this.y+=this.velocityY,this.isInInitialDirection?(this.sizeWidth+=.8,this.sizeHeight+=.8):this.sizeWidth>=0?(this.sizeWidth-=.8,this.sizeHeight-=.8):this.deactivate(),this.canvas.ctx.beginPath(),this.canvas.ctx.fillStyle="#2244FF",this.canvas.ctx.fillRect(this.x,this.y,this.sizeWidth,this.sizeHeight),this.canvas.ctx.closePath(),this.lifeRender+=1,this.lifeRender>=this.maxLifeInRender&&this.deactivate())},t}(),o=function(t,e,i){var s=t-e;return s*i/(e+s)},y=function(t,e,i){var s=e.x-t.x,n=e.y-t.y,h=Math.sqrt(Math.pow(s,2)+Math.pow(n,2));return i.x*(s/h)+i.y*(n/h)},l=function(t,e){var i=e.x>t.x+t.width,s=t.x>e.x+e.width,n=e.y>t.y+t.height,h=t.y>e.y+e.height;return!(i||s||n||h)},u=function(t,e,i,s){var n=s*(Math.PI/180);return{targetX:t+i*Math.cos(n),targetY:e+i*Math.sin(n)}},d=function(){return(d=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},f=/** @class */function(){function t(t,e){this.pulses=[],this.obstacle=e,this.canvas=t,this.angle0360=0,this.angle0360V2=180,this.xSendPulses=100,this.ySendPulses=300,this.width=20,this.height=20,this.frequency=0,this.frequency2=1e5,this.frequencyGapToDoppler=1e3,this.frequencySendList={}}return t.prototype.detectReport=function(){var t=this;this.pulses.forEach(function(e){if(e.isActive&&!e.isInInitialDirection&&l({x:e.x,y:e.y,width:e.sizeWidth,height:e.sizeHeight},{x:t.xSendPulses,y:t.ySendPulses,width:t.width,height:t.height})){var i=1e3*Math.round(e.publicFrequency/1e3);t.frequencySendList[i]=d(d({},t.frequencySendList[i]),{timeRecievid:new Date().getTime(),frequencyRecieved:e.publicFrequency}),e.deactivate()}})},t.prototype.mapObjects=function(){var t=this,e=[];return Object.keys(this.frequencySendList).forEach(function(i){if(t.frequencySendList[i].timeRecievid){var s=t.frequencySendList[i].timeRecievid-t.frequencySendList[i].timeStart,n=u(t.xSendPulses,t.ySendPulses,800*s/2817,t.frequencySendList[i].angle0360),h=o(t.frequencySendList[i].frequencyRecieved,Number(i),12345);e.push(d(d({},n),{timeRecieved:t.frequencySendList[i].timeRecievid,RadialVelocityTarget:h}))}}),e},t.prototype.deactivatePulse=function(t){t.deactivate()},t.prototype.cleanup=function(){this.pulses=this.pulses.filter(function(t){return t.isActive})},t.prototype.renderPulses=function(){var t=this;this.pulses.forEach(function(e){if(e.render(),e.isInInitialDirection&&l({x:e.x,y:e.y,width:e.sizeWidth,height:e.sizeHeight},t.obstacle)){e.returnDirection();var i=y({x:t.xSendPulses,y:t.ySendPulses},{x:t.obstacle.x,y:t.obstacle.y},{x:t.obstacle.xVelocity,y:t.obstacle.yVelocity});t.obstacle.xVelocity,t.obstacle.xVelocity,t.obstacle.yVelocity,t.obstacle.yVelocity,e.publicFrequency=e.publicFrequency*(12345/(12345+i))}})},t.prototype.render=function(){this.canvas.ctx.beginPath(),this.canvas.ctx.fillStyle="#222222",this.canvas.ctx.fillRect(this.xSendPulses,this.ySendPulses,this.width,this.height),this.canvas.ctx.closePath(),this.frequency+=this.frequencyGapToDoppler,this.frequency2+=this.frequencyGapToDoppler,this.frequency>1e5&&(this.frequency=0),this.frequency2>1e7&&(this.frequency2=1e5+this.frequencyGapToDoppler),this.angle0360+=3,this.angle0360>=360&&(this.angle0360=0),this.angle0360V2+=3,this.angle0360V2>=360&&(this.angle0360V2=0);var t=this.angle0360*(Math.PI/180);this.frequencySendList[this.frequency]={timeStart:new Date().getTime(),angle0360:this.angle0360,xStart:this.xSendPulses,yStart:this.ySendPulses,timeRecievid:void 0,frequencyRecieved:void 0},this.pulses.push(new r(this.canvas,t,20,this.xSendPulses,this.ySendPulses,this.frequency));//
var e=this.angle0360V2*(Math.PI/180);this.frequencySendList[this.frequency2]={timeStart:new Date().getTime(),angle0360:this.angle0360V2,xStart:this.xSendPulses,yStart:this.ySendPulses,timeRecievid:void 0,frequencyRecieved:void 0},this.pulses.push(new r(this.canvas,e,15,this.xSendPulses,this.ySendPulses,this.frequency2)),this.renderPulses(),this.cleanup(),this.detectReport()},t}(),x=/** @class */function(){function t(t){this.radar=t,this.element=document.getElementById("canvas2"),this.ctx=this.element.getContext("2d"),this.x=0,this.y=0,this.width=1e3,this.height=500}return t.prototype.render=function(){var t=this,e=this.radar.mapObjects();this.ctx.clearRect(0,0,500,500),this.ctx.arc(250,250,250,0,2*Math.PI),this.ctx.strokeStyle="#44de3c",this.ctx.stroke();var i={x:0,y:0};e.forEach(function(e){new Date().getTime()-e.timeRecieved<=2e3&&(t.ctx.beginPath(),l({x:e.targetX/5,y:e.targetY/5,width:30,height:30},{x:i.x,y:i.y,width:30,height:30})||(t.ctx.fillStyle="#44de3c",t.ctx.font="16px Arial",t.ctx.textAlign="center",t.ctx.fillText("X=".concat(Math.floor(e.targetX)," Y=").concat(Math.floor(e.targetY)," RV=").concat(Number(e.RadialVelocityTarget.toFixed(2))),Math.floor(e.targetX/5),Math.floor(e.targetY/5)-10),i={x:e.targetX/5,y:e.targetY/5}),t.ctx.fillStyle="#44de3c",t.ctx.fillRect(e.targetX/5,e.targetY/5,10,10),t.ctx.closePath())})},t}();t=new function(){this.element=document.getElementById("canvas"),this.ctx=this.element.getContext("2d"),this.x=0,this.y=0,this.width=1e3,this.height=500},e=new function(){var t=this;this.keyboardState={top:!1,left:!1,bottom:!1,right:!1,KeyQ:!1,KeyE:!1};var e={KeyW:function(e){t.keyboardState.top=e},KeyS:function(e){t.keyboardState.bottom=e},KeyA:function(e){t.keyboardState.left=e},KeyD:function(e){t.keyboardState.right=e},KeyQ:function(e){t.keyboardState.KeyQ=e},KeyE:function(e){t.keyboardState.KeyE=e}};window.addEventListener("keydown",function(t){var i;null===(i=e[t.code])||void 0===i||i.call(e,!0)}),window.addEventListener("keyup",function(t){var i;null===(i=e[t.code])||void 0===i||i.call(e,!1)})},i=new h(t,e),s=new a.Radar(t,i),n=new x(s),new c().render(function(){t.ctx.clearRect(t.x,t.y,t.width,t.height),i.render(),s.render(),n.render()});//# sourceMappingURL=radar.260c78c1.js.map

//# sourceMappingURL=radar.260c78c1.js.map
