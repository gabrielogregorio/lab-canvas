function t(t,e,i,n){Object.defineProperty(t,e,{get:i,set:n,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var i,n,r,a,s,o=globalThis,h={},c={},u=o.parcelRequiree935;null==u&&((u=function(t){if(t in h)return h[t].exports;if(t in c){var e=c[t];delete c[t];var i={id:t,exports:{}};return h[t]=i,e.call(i.exports,i,i.exports),i.exports}var n=Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){c[t]=e},o.parcelRequiree935=u),(0,u.register)("27Lyk",function(e,i){t(e.exports,"register",()=>n,t=>n=t);var n,r=new Map;n=function(t,e){for(var i=0;i<e.length-1;i+=2)r.set(e[i],{baseUrl:t,path:e[i+1]})}}),u("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["ghItd","radarV2.693aae8b.js","fUPKt","helicopter_r1.d679ec66.png","b4iWM","helicopter_r2.3eb7d1f0.png","9hF0h","helicopter_r3.e9431d04.png","eElcJ","radar.ac49fdbd.png","hn9kt","warShip.6c1fc1ef.png"]'));var d={};d=new URL("helicopter_r1.d679ec66.png",import.meta.url).toString();var l={};l=new URL("helicopter_r2.3eb7d1f0.png",import.meta.url).toString();var p={};p=new URL("helicopter_r3.e9431d04.png",import.meta.url).toString();var f=function(t,e){var i=e.x>t.x+t.width,n=t.x>e.x+e.width,r=e.y>t.y+t.height,a=t.y>e.y+e.height;return!(i||n||r||a)},y=function(t){return t*(Math.PI/180)},g=function(t,e){var i=new Image;i.src=t,i.onload=function(){e(i)}},x=function(t,e,i,n,r,a,s){t.beginPath(),t.save(),t.translate(n+a/2,r+s/2),t.rotate(i*Math.PI/180),t.translate(-n-a/2,-r-s/2),t.drawImage(e,n,r,a,s),t.restore(),t.closePath()},b=/** @class */function(){function t(t,i){var n=this;this.keyboard=i,this.canvas=t,this.x=300,this.y=400,this.width=45,this.height=26,this.xSpeed=0,this.ySpeed=0,this.currentImage=0,g(/*@__PURE__*/e(d),function(t){n.image1=t}),g(/*@__PURE__*/e(l),function(t){n.image2=t}),g(/*@__PURE__*/e(p),function(t){n.image3=t})}return t.prototype.updateSpeed=function(){this.keyboard.keyboardState.top&&(this.ySpeed-=.2),this.keyboard.keyboardState.bottom&&(this.ySpeed+=.2),this.keyboard.keyboardState.left&&(this.xSpeed-=.2),this.keyboard.keyboardState.right&&(this.xSpeed+=.2)},t.prototype.updateLocation=function(){this.x+=this.xSpeed,this.y+=this.ySpeed,this.keyboard.keyboardState.KeyQ&&(this.width-=5,this.height-=5),this.keyboard.keyboardState.KeyE&&(this.width+=5,this.height+=5)},t.prototype.drawObstacleInfo=function(){this.canvas.ctx.beginPath(),this.canvas.ctx.fillStyle="#ffffff",this.canvas.ctx.font="16px Arial",this.canvas.ctx.textAlign="center";var t=Math.floor(this.x),e=Math.floor(this.y),i=Number(this.xSpeed.toFixed(1)),n=Number(this.ySpeed.toFixed(1));this.canvas.ctx.fillText("xy=(".concat(t,", ").concat(e,") vxy=(").concat(i,", ").concat(n,")"),this.x,this.y-10),this.canvas.ctx.closePath()},t.prototype.drawImageObstacle=function(){if(this.canvas.ctx.beginPath(),this.currentImage+=1,this.currentImage>=3&&(this.currentImage=0),this.image1&&this.image2&&this.image3){var t={0:this.image1,1:this.image2,2:this.image3};this.canvas.ctx.drawImage(t[this.currentImage],this.x,this.y)}this.canvas.ctx.closePath()},t.prototype.drawObstacle=function(){this.drawObstacleInfo(),this.drawImageObstacle()},t.prototype.render=function(){this.updateSpeed(),this.updateLocation(),this.drawObstacle()},t}(),v=/** @class */function(){function t(){}return t.prototype.render=function(t){var e=performance.now(),i=function(n){n-e>=16.666666666666668&&(t(),e=n),requestAnimationFrame(i)};requestAnimationFrame(i)},t}(),m={};t(m,"Radar",()=>D);var w=/** @class */function(){function t(){this.r=0,this.g=0,this.b=0}return t.prototype.toRgb=function(){return"rgb(".concat(Math.floor(this.r),", ").concat(Math.floor(this.g),", ").concat(Math.floor(this.b),")")},t.prototype.getColorByFactorFrequency=function(t){return t<0&&(t=0),t>1e5&&(t=1e5),(t-0)/1e5*40+80},t.prototype.generateRgbByFrequency=function(t){var e=this.getColorByFactorFrequency(t);this.r=e,this.g=e,this.b=e},t.prototype.applyBlueShift=function(t){this.b+=t/100},t.prototype.applyRedShift=function(t){this.r+=t/100},t}(),S=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,a=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));return i.x*(n/a)+i.y*(r/a)},P=/** @class */function(){function t(t,e,i,n,r,a,s,o){this.x=n,this.y=r,this.width=2,this.height=2,this.lifeRender=0,this.isInInitialDirection=!0,this.canvas=t,this.obstacle=s,this.frequency=a,this.isActive=!0,this.speedX=Math.cos(e)*i,this.speedY=Math.sin(e)*i,this.startPositionLaunch=o,this.color=new w,this.color.generateRgbByFrequency(a)}return t.prototype.destroyPulse=function(){this.isActive=!1},t.prototype.applyBlueShift=function(t){this.color.applyBlueShift(t)},t.prototype.applyRedShift=function(t){this.color.applyRedShift(t)},t.prototype.updateLocation=function(){this.x+=this.speedX,this.y+=this.speedY},t.prototype.updateScale=function(){this.isInInitialDirection?(this.width+=1,this.height+=1):this.width>=0?(this.width-=1,this.height-=1):this.destroyPulse()},t.prototype.drawPulse=function(){this.canvas.ctx.beginPath(),this.canvas.ctx.fillStyle=this.color.toRgb(),this.canvas.ctx.fillRect(this.x,this.y,this.width,this.height),this.canvas.ctx.closePath()},t.prototype.handleLifeRender=function(){this.lifeRender+=1,this.lifeRender>=600&&this.destroyPulse()},t.prototype.invertDirection=function(){this.speedX=-1*this.speedX,this.speedY=-1*this.speedY,this.isInInitialDirection=!1},t.prototype.handleCollisionWithObstacle=function(){var t=f(this,this.obstacle);if(!1!==this.isInInitialDirection&&!1!==t){var e,i=(e=S(this.startPositionLaunch,this.obstacle,{x:this.obstacle.xSpeed,y:this.obstacle.ySpeed}),this.frequency*(12345/(12345+e)));i>this.frequency&&this.applyBlueShift(i),i<this.frequency&&this.applyRedShift(i),this.invertDirection(),this.frequency=i}},t.prototype.render=function(){this.isActive&&(this.updateLocation(),this.updateScale(),this.drawPulse(),this.handleLifeRender(),this.handleCollisionWithObstacle())},t}(),R={};R=new URL("radar.ac49fdbd.png",import.meta.url).toString();var I=function(t,e,i){var n=t-e;return n*i/(e+n)},_=function(){return(_=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},D=/** @class */function(){function t(t,i){var n=this;this.pulses=[],this.calculatePositionXYTarget=function(t,e,i,n){var r=y(n);return{x:t+i*Math.cos(r),y:e+i*Math.sin(r)}},this.obstacle=i,this.canvas=t,this.currentDegree=0,this.x=100,this.y=300,this.width=20,this.height=20,this.frequency=0,this.databasePulses={},g(/*@__PURE__*/e(R),function(t){n.radarImage=t})}return t.prototype.handleReturnedPulses=function(){var t=this;this.pulses.forEach(function(e){var i=f(e,{x:t.x,y:t.y,width:t.width,height:t.height});if(e.isActive&&!e.isInInitialDirection&&i){var n=1e3*Math.round(e.frequency/1e3);t.databasePulses[n]||e.destroyPulse(),t.databasePulses[n]=_(_({},t.databasePulses[n]),{timeReceived:new Date().getTime(),frequencyReceived:e.frequency}),e.destroyPulse()}})},t.prototype.calculateDistanceByLaunchAndReceivedTime=function(t){return 800*(t.timeReceived-t.timeLaunched)/2817},t.prototype.calculateTargetInformation=function(t,e){var i=this.calculateDistanceByLaunchAndReceivedTime(t),n=this.calculatePositionXYTarget(this.x,this.y,i,t.degree),r=I(t.frequencyReceived,e,12345);return{timeReceived:t.timeReceived,targetPosition:n,estimatedDistance:i,radialSpeed:r}},t.prototype.getDetectTargets=function(){var t=this,e=[];return Object.keys(this.databasePulses).forEach(function(i){var n=t.databasePulses[i];n.timeReceived&&e.push(t.calculateTargetInformation(n,Number(i)))}),e},t.prototype.cleanup=function(){this.pulses=this.pulses.filter(function(t){return t.isActive})},t.prototype.renderPulses=function(){this.pulses.forEach(function(t){t.render()})},t.prototype.updateFrequency=function(){this.frequency+=1e3,this.frequency>1e5&&(this.frequency=0)},t.prototype.updateDegree=function(){this.currentDegree+=3,this.currentDegree>=360&&(this.currentDegree=0)},t.prototype.drawRadarImage=function(){if(this.radarImage){var t=this.x-20,e=this.y-20,i=2*this.width,n=2*this.height;x(this.canvas.ctx,this.radarImage,this.currentDegree,t,e,i,n)}},t.prototype.launchPulse=function(){var t=y(this.currentDegree);this.databasePulses[this.frequency]={timeLaunched:new Date().getTime(),degree:this.currentDegree,xLaunch:this.x,yLaunch:this.y,timeReceived:void 0,frequencyReceived:void 0},this.pulses.push(new P(this.canvas,t,20,this.x,this.y,this.frequency,this.obstacle,{x:this.x,y:this.y}))},t.prototype.render=function(){this.updateFrequency(),this.updateDegree(),this.drawRadarImage(),this.launchPulse(),this.renderPulses(),this.cleanup(),this.handleReturnedPulses()},t}(),k=/** @class */function(){function t(t){this.radar=t,this.element=document.getElementById("canvas2"),this.ctx=this.element.getContext("2d"),this.x=0,this.y=0,this.width=500,this.height=500}return t.prototype.drawRadarCircle=function(){var t=this,e=2*Math.PI,i=this.width/2,n=this.height/2;[0,1,2,3,4].forEach(function(r){t.ctx.beginPath(),t.ctx.strokeStyle="#44de3c",t.ctx.arc(i,n,Math.floor(i-50*r),0,e),t.ctx.stroke(),t.ctx.closePath()})},t.prototype.getDetections=function(){return this.radar.getDetectTargets()},t.prototype.isOutsideClusterZone=function(t,e){return!f({x:t.targetPosition.x/3,y:t.targetPosition.y/3,width:30,height:30},{x:e.x,y:e.y,width:30,height:30})},t.prototype.drawInformationCluster=function(t){this.ctx.fillStyle="#44de3c",this.ctx.font="16px Arial",this.ctx.textAlign="center";var e=Math.floor(t.targetPosition.x),i=Math.floor(t.targetPosition.y),n=Number(t.radialSpeed.toFixed(2)),r=Math.floor(t.targetPosition.x/3),a=Math.floor(t.targetPosition.y/3)-10;this.ctx.fillText("xy=(".concat(e,", ").concat(i,") radialV=").concat(n),r,a)},t.prototype.drawClusterItem=function(t){this.ctx.fillStyle="#44de3c",this.ctx.fillRect(t.targetPosition.x/3,t.targetPosition.y/3,10,10)},t.prototype.drawDetections=function(t){var e=this,i={x:0,y:0};this.ctx.beginPath(),t.forEach(function(t){new Date().getTime()-t.timeReceived>2e3||(e.isOutsideClusterZone(t,i)&&(e.drawInformationCluster(t),i={x:t.targetPosition.x/3,y:t.targetPosition.y/3}),e.drawClusterItem(t))}),this.ctx.closePath()},t.prototype.render=function(){this.ctx.clearRect(0,0,500,500),this.drawRadarCircle(),this.drawDetections(this.getDetections())},t}(),q={};q=new URL("warShip.6c1fc1ef.png",import.meta.url).toString(),i=new/** @class */(function(){function t(){var t=this;this.element=document.getElementById("canvas"),this.ctx=this.element.getContext("2d"),this.x=0,this.y=0,this.width=1e3,this.height=500,g(/*@__PURE__*/e(q),function(e){t.warShip=e})}return t.prototype.drawOcean=function(){this.ctx.beginPath(),this.ctx.fillStyle="#4baff2",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.closePath()},t.prototype.drawWarShip=function(){this.ctx.beginPath(),this.ctx.drawImage(this.warShip,-2,248,120,120),this.ctx.closePath()},t.prototype.render=function(){this.drawOcean(),this.drawWarShip()},t}()),n=new function(){var t=this;this.keyboardState={top:!1,left:!1,bottom:!1,right:!1,KeyQ:!1,KeyE:!1};var e={KeyW:function(e){t.keyboardState.top=e},KeyS:function(e){t.keyboardState.bottom=e},KeyA:function(e){t.keyboardState.left=e},KeyD:function(e){t.keyboardState.right=e},KeyQ:function(e){t.keyboardState.KeyQ=e},KeyE:function(e){t.keyboardState.KeyE=e}};window.addEventListener("keydown",function(t){var i;null===(i=e[t.code])||void 0===i||i.call(e,!0)}),window.addEventListener("keyup",function(t){var i;null===(i=e[t.code])||void 0===i||i.call(e,!1)})},r=new b(i,n),a=new m.Radar(i,r),s=new k(a),new v().render(function(){i.ctx.clearRect(i.x,i.y,i.width,i.height),i.render(),r.render(),a.render(),s.render()});//# sourceMappingURL=radarV2.693aae8b.js.map

//# sourceMappingURL=radarV2.693aae8b.js.map
